:root {
  --nav-height: 64px;
  --sidebar-width: 20rem;
  --sidebar-rail: 5.5rem;
  --layout-breakpoint: 920px;
  --layout-gap: 1.25rem;
}

/* ---------- GRID: navbar occupies top-right cell only ----------
   Sidebar spans both rows on the left column. Content column has navbar then main.
*/
.app-layout {
  display: grid;
  grid-template-columns: var(--sidebar-width) 1fr;
  /* left: sidebar, right: content */
  grid-template-rows: var(--nav-height) 1fr;
  /* top row: navbar (content col), bottom: main */
  height: 100vh;
  min-height: 100vh;
  transition: grid-template-columns var(--layout-transition) ease;
  box-sizing: border-box;
}

/* Sidebar sits in left column and spans both navbar row and main row */
.sidebar {
  grid-column: 1 / 2;
  grid-row: 1 / 3;
  /* span both rows */
  height: 100%;
  overflow: auto;
  box-sizing: border-box;
  z-index: 50;
}

/* Navbar sits in the right column, top row only (does NOT span left) */
.app-navbar {
  grid-column: 2 / -1;
  /* right column(s) */
  grid-row: 1 / 2;
  /* top row only */
  position: sticky;
  top: 0;
  /* sticky relative to the content column */
  z-index: 60;
  /* above content, still under any global overlays */
  background: transparent;
  /* keep visuals to navbar.css */
}

/* Main content sits below the navbar in the right column */
.app-main {
  grid-column: 2 / -1;
  grid-row: 2 / 3;
  padding: var(--layout-gap);
  min-height: 0;
  /* very important to enable internal scrolling */
  overflow: auto;
  /* main scroll happens here */
  -webkit-overflow-scrolling: touch;
  box-sizing: border-box;
}

/* Collapsed rail (desktop) - toggle this class on body */
body.sidebar-collapsed .app-layout {
  /* grid-template-columns: var(--sidebar-rail) 1fr; Do this if sidebar has collapsible rail */
  grid-template-columns: 0 1fr;

}

body.sidebar-collapsed .sidebar {
  width: 0;
  /* animate sidebar width to rail */
  transform: translateX(0);
  /* keep it in flow, no large slide */
  opacity: 1;
  overflow: hidden;
}

.page-header {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  justify-content: space-between;
  gap: .75rem;
  margin-bottom: 1rem;
}
.header__right {
  display: flex;
  align-items: center;
flex-wrap: wrap;
  gap: .75rem;
}

/* ---------- Mobile: sidebar becomes off-canvas under the navbar ----------
   Sidebar should be off-canvas starting under the navbar, not covering it. */
@media (max-width: 920px) {

  /* collapse left column width to 0 so content takes full width */
  .app-layout {
    grid-template-columns: 0 1fr;
    grid-template-rows: var(--nav-height) 1fr;
  }

  /* turn sidebar into an off-canvas panel placed under the navbar */
  .sidebar {
    position: fixed;
    top: var(--nav-height);
    /* start below the navbar */
    left: 0;
    bottom: 0;
    width: var(--sidebar-width);
    transform: translateX(-110%);
    /* hidden by default */
    z-index: 70;
    /* still under the navbar (60) or set bigger accordingly */
    box-shadow: 0 20px 40px rgba(2, 6, 23, 0.16);
    background: var(--primary-50);
    /* look controlled by sidebar.css */
    overflow: auto;
    height: calc(100vh - var(--nav-height));
  }

  /* when body.show-sidebar is set, reveal the off-canvas sidebar */
  body.show-sidebar .sidebar {
    transform: translateX(0);
  }

  /* overlay backdrop (should not cover the navbar) â€” add a .sidebar-overlay element */
  .sidebar-overlay {
    display: none;
  }

  body.show-sidebar .sidebar-overlay {
    display: block;
    position: fixed;
    inset: var(--nav-height) 0 0 0;
    /* top offset = navbar height, so navbar remains visible */
    background: rgba(0, 0, 0, 0.36);
    z-index: 65;
    /* below sidebar (70) and under navbar (60) if desired */
    pointer-events: auto;
  }

  /* prevent body scroll while overlay visible */
  body.show-sidebar {
    overflow: hidden;
  }
}